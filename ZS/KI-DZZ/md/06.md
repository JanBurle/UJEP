# Fyzik√°ln√≠/fyzick√© modelov√°n√≠ zvuku

## Karplus-Strong≈Øv algoritmus pro synt√©zu zvuku struny

S vyu≈æit√≠m na≈°eho [toolboxu](./02a.md) + ≈°umy:

```python
class KarplusStrong(Wave):
  def __init__(self, dur: Dur, amp: Amp, frq: Frq, decay: float = 0.996, fade=True):
    self.decay = decay
    super().__init__(dur, amp, frq, 0, fade)

  def _make(self, dur: Dur, amp: Amp, frq: Frq, phs: Phs, fade: bool):
    n_smp = toSmp(dur)
    N = int(sr / frq)  # delay line length
    line = np.random.uniform(-1, 1, N).astype(Flt) # excitation / white noise
    out = np.zeros(n_smp, Flt) # output buffer

    for i in range(n_smp): # loop
      out[i] = line[i % N]
      avg = self.decay * (line[i % N] + line[(i+1) % N])/2 # simple LP filter
      line[i % N] = avg

    out = out / np.max(np.abs(out))   # normalize to [-1, 1]
    self.buf = (amp * out).astype(Flt)

    if fade:
      self._fade()
```

```python
audio = Audio()

for i,frq in enumerate([220, 440, 660, 880]):
  wave = KarplusStrong(1.6, .8, frq, fade=False)
  audio.add(wave, i)

audio.plot(.1)
audio.show()
```

# Csound (1986, MIT)

https://csound.com

Dom√©novƒõ-specifick√Ω jazyk pro synt√©zu zvuku a programov√°n√≠ hudby.

Modul√°rn√≠ a roz≈°i≈ôiteln√Ω syst√©m zalo≈æen√Ω jednotkov√Ωch gener√°torech (unit generators).

Dva textov√© soubory: orchestr `.orc` a notov√Ω z√°pis `.sco`. Oba lze spojit do jednoho `.csd`.

Prefixy:

- g = global
- i = init (once)
- k = control (slow)
- a = audio (fast)
- s = string/text
- p = score parameter

V prohl√≠≈æeƒçi: https://ide.csound.com/profile/JanBurle

... üéµ üéß !
