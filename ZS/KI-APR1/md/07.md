# 07 ‚Äì Kolekce

Kolekce jsou objekty slou≈æ√≠c√≠ k ukl√°d√°n√≠ jin√Ωch objekt≈Ø (polo≈æek, prvk≈Ø, element≈Ø). Polo≈æek m≈Ø≈æe b√Ωt 0 nebo vice, potenci√°lnƒõ dokonce velmi mnoho.

Kolekce mohou:

- b√Ωt modifikovateln√© (mutable) nebo nemƒõnn√© (immutable)
- m√≠t fixn√≠ nebo promƒõnnou (dynamickou) velikost
- b√Ωt homogenn√≠ (stejnorod√©) nebo nehomogenn√≠.
- b√Ωt sekvenƒçn√≠ (jejich polo≈æky maj√≠ urƒçitou pozici/index) nebo asociativn√≠ (polo≈æky jsou p≈ô√≠stupn√© pomoc√≠ kl√≠ƒçe, nikoliv indexu)

## Kolekce v Pythonu

- seznam (`list`) ‚Äì modifikovateln√°, dynamick√°, nehomogenni, sekvenƒçn√≠
- n-tice (`tuple`) ‚Äì nemodifikovateln√°, statick√°, nehomogenni, sekvenƒçn√≠
- mno≈æina (`set`) ‚Äì modifikovateln√°, dynamick√°, nehomogeni, asociativn√≠
- slovn√≠k (`dict`) ‚Äì modifikovateln√Ω, dynamick√Ω, nehomogenni, asociativn√≠ (mapa)

## seznam (list)

Seznam je modifikovateln√°, dynamick√°, nehomogenni (ale ƒçasto pou≈æ√≠van√° jako homogenn√≠), sekvenƒçn√≠ kolekce.

Seznam lze zapsat (vytvo≈ôit) jako liter√°l:

```python
# pr√°zdn√Ω seznam
[]

# seznam ƒç√≠sel
[0,1,2,3]

# seznam z podseznamy
['a', ['A', 8, False], 4+5]
```

Nebo z _iterovateln√©ho_ objektu vestavƒõnou funkc√≠ `list()`:

```python
list([1,2,3])   # seznam ze seznamu (pr√°zdn√° operace)
list(range(4))  # seznam z range()
list('abc')     # seznam p√≠smen v ≈ôetƒõzci
list((2,4,'b')) # seznam z n-tice
list({5,'b',7}) # seznam z mno≈æiny ...
list({5, 8, 7}) # ... polo≈æky maj√≠ nedefinovan√© po≈ôad√≠!
```

## n-tice (tuple)

N-tice je nemodifikovateln√°, statick√°, nehomogenni, sekvenƒçn√≠ kolekce.

N-tice se vytv√°≈ô√≠ jako liter√°l:

```python
()           # pr√°zdn√°
('a',)       # jednice (ƒç√°rka!)
('a','b')    # dvojice
('a','b', 8) # trojice
```

Nebo vestavƒõnou funkc√≠:

```python
tuple()    # pr√°zdn√°
tuple([])
tuple([10])
tuple([10,20])
tuple({})
tuple({'b',4,'y','a',5,1}) # nedefinovan√© po≈ôad√≠
tuple('abcd')
```

## mno≈æina / set

Mno≈æina je modifikovateln√°, nehomogenni, asociativn√≠ kolekce.

Mno≈æina se vytv√°≈ô√≠ jako liter√°l:

```python
{3, 2, 2, 1}     # bez duplik√°t≈Ø
{3, 'b', 2, 'a'} # nedefinovan√© po≈ôad√≠
```

```python
{} # Toto je pr√°zdn√Ω slovn√≠k! Pro pr√°zdnou mno≈æinu je nutno pou≈æ√≠t set()
```

Nebo vestavƒõnou funkc√≠:

```python
set()
set([2,4,6])
set(range(6))
set((2,4,1))
set('abcd')
```

## Seznam

Seznam je nejpou≈æ√≠vanƒõj≈°√≠ ze zm√≠nƒõn√Ωch kolekc√≠. Operace nad seznamy:

```python
lst  = [1,2,3]  # seznam
lst1 = lst      # odkazuje na stejn√Ω seznam jako lst
lst2 = [1,2,3]  # jin√Ω seznam

# seznamy lze porovn√°vat
lst == lst2
lst != lst2
lst <  lst2
lst <= lst2
lst >  lst2
lst >= lst2

# seznamy lze:
3 in lst      # testovat na p≈ô√≠tomnost prvku
lst[2]        # indexovat
lst[-1]
lst + [4]     # konkatenovat
lst.copy()    # kop√≠rovat
lst * 3       # replikovat (mno≈æit)
4 * lst
lst[0::2]     # vy≈ôez√°vat
len(lst)      # mƒõ≈ôit (zjistit d√©lku)
print(lst)    # tisknout

# obracet
reversed(lst) # iter√°tor v opaƒçn√©m smƒõru
lst.reverse() # obr√°cen√≠ na m√≠stƒõ (in-place, in-situ)

# p≈ôid√°v√°n√≠ a ub√≠r√°n√≠ prvk≈Ø na konci seznamu
lst.append(8) # p≈ôidat na konec
lst.pop()     # ubrat z konce (z√°sobn√≠k)

# p≈ôid√°v√°n√≠ a ub√≠r√°n√≠ prvk≈Ø jinde ne≈æ na konci seznamu
lst.insert(0, 88) # vlo≈æen√≠ prvku na zadan√Ω index
del lst[0]    # smaz√°n√≠ prvku

# p≈ôid√°n√≠ seznamu z iterovateln√©ho objektu na konec seznamu
lst.extend(range(3))

# odebr√°n√≠ prvku, pokud je nalezen
lst.remove(3)
# poƒçet nalezen√Ωch prvk≈Ø
lst.count(2)

# set≈ô√≠dƒõn√≠ prvk≈Ø - prvky seznamu mus√≠ b√Ωt porovnateln√© (typicky homogenn√≠ seznam)
lst.sort()

# vypr√°zdnƒõn√≠ seznamu
lst.clear()
```

V√Ω≈ôez seznamu je tak√© seznam.

```python
s = list('abcd')
s[1:3]            # v√Ω≈ôez
s[1:3] = [1,2,3]  # "nafouknut√≠"
s[4:] = []        # zkr√°cen√≠
```

## ƒåasov√° slo≈æitost (time complexity)

["Big O"](https://en.wikipedia.org/wiki/Big_O_notation) - limitn√≠ chov√°n√≠ funkce/algoritmu p≈ôi rostouc√≠m poƒçtu prvk≈Ø _n_.

(Limitn√≠/asymptotn√≠ chov√°n√≠: v√Ωznamn√© pro velk√° _n_. Na zaƒç√°tku se chov√° jinak, a≈æ pozdƒõji je to nap≈ô. line√°rn√≠.)

```
O(1)        = k (konstanta), konstantn√≠ ƒças
O(n)        = k*n, line√°rn√≠
O(a**2)     = parabola (polynom, pou≈æiteln√© pro omezen√° n)
O(a**n)   = exponenci√°ln√≠ (nepou≈æiteln√©)
O(log(n))   = logaritmick√©, dob≈ôe pou≈æiteln√©
O(n*log(n)) = logaritmick√©, celkem pou≈æiteln√©
```

`append()`: O(1)

```python
for n in [10, 1000, 10_000, 100_000, 1_000_000]:
  print(n)
  lst = list(range(n))
  %time lst.append(11)
  # %timeit lst.append(11)
  print()
```

`insert()`: O(n)

```python
for n in [10, 1000, 10_000, 100_000, 1_000_000]:
  print(n)
  lst = list(range(n))
  %time lst.insert(0,11)
  print()
```

### √öloha

Odhadnƒõte/zmƒõ≈ôte ƒçasovou slo≈æitost dal≈°√≠ch operac√≠ nad seznamem: d√©lka (`len(...)`), indexace, sort, ...

### √öloha

Rekurzivn√≠ v√Ωpoƒçet faktori√°lu m√° slo≈æitost O(n), a lze ji proto pou≈æ√≠t:

```python
def fact(n:int) -> int:
  return 1 if 0==n else n * fact(n-1)

for n in [0,10,20,30,40,50,60,70]:
  %time print(n, fact(n))
  # %timeit fact(n)
```

Podobnou rekurzivn√≠ definici Fibonacciho ≈ôady ale nelze pro n vƒõt≈°√≠ ne≈æ asi 30 pou≈æ√≠t. Proƒç?

```python
def fib(n:int) -> int:
  return n if n in [0,1] else fib(n-1) + fib(n-2)

for n in range(20):
  print(n,fib(n))
# for n in range(40):
#   print(n,fib(n))
```

## √ölohy (kredit: PB)

### Poƒçet samohl√°sek

Vypoƒç√≠tejte seznam dvojic `(jm√©no, poƒçet samohl√°sek ve jm√©nƒõ)`. Jm√©na jsou zadan√° v p≈ôipraven√©m seznamu.

```python
jm√©na = ["Pavel", "Milan", "Alena", "Rostislavom√≠r"]
# ... dopl≈àte k√≥d

# v√Ωsledek: [("Pavel", 2), ("Milan", 2), ("Alena", 3), ("Rostislav", 5)]
```

### P≈ôihla≈°ovac√≠ syst√©m

Napi≈°te program, kter√Ω po≈æ√°d√° u≈æivatele o login a heslo.

Program n√°slednƒõ zkontroluje, zda se zadan√° dvojice `(login, heslo)` nach√°z√≠ v seznamu registrovan√Ωch u≈æivatel≈Ø. Pokud ano, program vyp√≠≈°e zpr√°vu o √∫spƒõ≈°n√©m p≈ôihl√°≈°en√≠.

Pokud ne, tak program zjist√≠, zda se v seznamu nach√°z√≠ alespo≈à login. Pokud ano, tak vyp√≠≈°e zpr√°vu o nespr√°vn√©m heslu.

Pokud se v seznamu login nenach√°z√≠, tak program u≈æivateli umo≈æn√≠ se zaregistrovat: p≈ôid√° se zadan√Ω login a heslo mezi registrovan√© u≈æivatele.

```python
users = [('Pavel', '1234'), ('Zbynƒõk', 'heslo')]
# ...
```

#### ≈†ibenice

Naprogramujte konzolovou verzi hry ≈°ibenice. Zadan√Ω je ≈ôetƒõzec - tajenka (slovo nebo fr√°ze), kterou hr√°ƒç nevid√≠. M√≠sto nƒõj na poƒç√°tku na obrazovce vid√≠ pouze podtr≈æ√≠tka. Hra hr√°ƒçe po≈æ√°d√° o zvolen√© p√≠smeno. Pokud toto p√≠smeno bylo u≈æ h√°d√°no, hra po≈æ√°d√° o jin√© p√≠smeno. Pokud hr√°ƒç p√≠smeno je≈°tƒõ neh√°dal, tak program zjist√≠, zda se p√≠smeno v tajence nach√°z√≠. Pokud ne, tak hr√°ƒçovi ubere ≈æivot. Pokud ano, tak m√≠sto podtr≈æ√≠tka zobraz√≠ uh√°dnut√© p√≠smeno. Hra konƒç√≠, kdy≈æ hr√°ƒç uh√°dne tajenku, nebo kdy≈æ mu dojdou ≈æivoty.

### Hr√°ƒçi

Mƒõjme seznam hr√°ƒç≈Ø a jejich sk√≥re v turnaji:

```python
hr√°ƒçi = [("Pavel", 5), ("Honza", 3), ("Jana", 7), ("Milan", 4), ("Michaela", 9)]
```

1. Vypi≈°te jm√©no nejlep≈°√≠ho a nejhor≈°√≠ho hr√°ƒçe (podle sk√≥re).

2. Vypi≈°te hr√°ƒçe v po≈ôad√≠ od nejlep≈°√≠ho po nejhor≈°√≠ho.

3. Vypi≈°te nejlep≈°√≠ 3 (top-3) hr√°ƒçe.

# üß© Mo≈æn√° ≈ôe≈°en√≠:

## Poƒçet samohl√°sek

Jednoduch√© ≈ôe≈°en√≠:

```python
jm√©na = [
  "Pavel Dou≈°a", "Milan Nguyen:::",
  "Alena Z√°bransk√°", "Rostislav Chrabr√Ω"
]

samohl√°sky = 'aeiou√°√©√≠√≥√∫≈Ø'
v√Ωsledek = []

for jm√©no in jm√©na:
  poƒçet = 0
  for p√≠smeno in jm√©no.lower():
    if p√≠smeno in samohl√°sky:
      poƒçet += 1

  v√Ωsledek.append((jm√©no, poƒçet))

print(f'{v√Ωsledek=}')
```

Stejn√© ≈ôe≈°en√≠ pomoc√≠ funkce:

```python
def countWovels(s: str) -> int:
  """Count vowels in s"""
  wovels = 'a√°e√©i√≠o√≥u√∫≈Øy√Ω'
  cnt = 0
  for char in s.lower():
    if char in wovels:
      cnt += 1

  return cnt

# a list of names
names = [
  "Pavel Dou≈°a", "Milan Nguyen:::",
  "Alena Z√°bransk√°", "Rostislav Chrabr√Ω"
]

# the result
result = []
for name in names:
  result.append((name, countWovels(name)))

print(f'{result=}')
```

## P≈ôihla≈°ovac√≠ syst√©m

≈òe≈°en√≠ s jednou funkc√≠, bez registrace:

```python
# existing accounts (user name, password)
users = [('Pavel', '1234'), ('Zbynƒõk', 'heslo')]

def login(name, pwd):
  # sanity check - reject bad input
  name = name.strip()
  pwd  = pwd.strip()
  if not name or not pwd:
    print('bad input')
    return

  # loop through accounts
  for account in users:
    acctName, acctPwd = account
    if name == acctName:  # match the user name
      if pwd == acctPwd:  # match the password
        print(name, 'logged in')
        return
      else:
        print('bad password')
        return

  print('new account:', name)
  users.append((name, pwd))

# test data
login('', ' ')
login('Pavel', '1234')
login('Zbynƒõk', '1234')
login('≈†imon', 'xyz')
login('≈†imon', 'xyz')
```

≈òe≈°en√≠ s v√≠ce funkcemi:

```python
# existing accounts (user name, password)
users = [('Pavel', '1234'), ('Zbynƒõk', 'heslo')]

def checkLogin(name:str, pwd:str) -> bool:
  """Check if name/pwd exists in users."""
  return (name,pwd) in users

def checkName(name:str) -> bool:
  """Check if name exists in users."""
  for userName,pwd in users:
    if userName == name:
      return True
  return False

def addUser(name:str, pwd:str):
  """Add name/pwd to users."""
  users.append((name, pwd))

def login(name:str, pwd:str):
  # sanity check
  name = name.strip()
  pwd  = pwd.strip()
  if not name or not pwd:
    print('bad input')
    return

  if checkLogin(name,pwd): # successfully logged in
    print(name, 'logged in')
    return

  if checkName(name):      # found name, but not password
    print('bad password')
    return False

  # found neither name nor password
  print('new account:', name)
  addUser(name, pwd)

# test
login('', ' ')
login('Pavel', '1234')
login('Zbynƒõk', '1234')
login('≈†imon', 'xyz')
login('≈†imon', 'xyz')
```

Vylep≈°en√≠: pou≈æit slovn√≠k (dictionary):

```python
# existing accounts: user name => password
users = {'Pavel': '1234', 'Zbynƒõk': 'heslo'}

def checkLogin(name:str, pwd:str) -> bool:
  """Check if name/pwd exists in users."""
  return users.get(name) == pwd

def checkName(name:str) -> bool:
  return name in users

def addUser(name:str, pwd:str):
  users[name] = pwd

def login(name:str, pwd:str):
  """Handle login or account creation."""
  # sanitize input
  name, pwd = name.strip(), pwd.strip()
  if not name or not pwd:
    print('Bad input: name or password is empty.')
    return

  if checkLogin(name,pwd): # successfully logged in
    print(f'User {name} logged in.')
    return

  if checkName(name):      # found name, but not password
    print('Bad password.')
    return False

  # found neither name nor password: new account
  print(f'New account created for {name}.')
  addUser(name, pwd)

# test cases
login('', ' ')
login('Pavel', '1234')
login('Zbynƒõk', '1234')
login('≈†imon', 'xyz')
login('≈†imon', 'xyz')
```

## ≈†ibenice

```python
from IPython.display import clear_output
from time import sleep

# tajenka
secret = 'Komu se nelen√≠, tomu se zelen√≠!'

# uhodnut√° p√≠smena
guessedChars = set()

# ≈æivoty
lifes = 6

def printSolution() -> bool:
  """Vyp√≠≈°e souƒçasn√© ≈ôe≈°en√≠. Vr√°t√≠ True, pokud je ≈ôe≈°en√≠ kompletn√≠."""
  isSolved = True
  for char in secret:
    showIt = not char.isalpha() or char.lower() in guessedChars
    print(char if showIt else '_', end='')
    isSolved = isSolved and showIt
  print()
  return isSolved

def guessChar(char):
  """H√°d√° se p√≠smeno. Vr√°t√≠ False kdy≈æ hr√°ƒç ztr√°c√≠ ≈æivot."""
  # sanity
  char = char.strip()
  if not char.isalpha() or 1!=len(char):
    print('H√°dejte jedno p√≠smeno!')
    sleep(3)
    return True

  # h√°d√°me
  if char in guessedChars:
    print('Toto p√≠smeno ji≈æ bylo!')
    sleep(3)
    return True # already guessed

  if secret.lower().count(char): # correctly guessed
    guessedChars.add(char)
    return True

  return False

def askInput():
  life = '≈æivoty' if lifes in [2,3,4] else '≈æivot' if lifes in [1] else '≈æivot≈Ø'

  print(f'M√°te {lifes} {life}.')
  return input('Jak√© p√≠smeno h√°d√°te? ')

while 0 < lifes:
  clear_output()
  if printSolution(): break
  if not guessChar(askInput().lower()):
    print('Au, to bol√≠...')
    sleep(3)
    lifes -= 1

print('Bezva.' if lifes else 'Jau.')
```

## Hr√°ƒçi

```python
hr√°ƒçi = [("Pavel", 5), ("Honza", 3), ("Jana", 7), ("Milan", 4), ("Michaela", 9)]

# t≈ô√≠dit podle druh√©ho pole
def keyField(hr√°ƒç):
  return hr√°ƒç[1]

hr√°ƒçi.sort(key=keyField, reverse=True)

print('1.', hr√°ƒçi[0], hr√°ƒçi[-1])
print('2.', hr√°ƒçi)
print('3.', hr√°ƒçi[:3])
```
