# 05 ‚Äì Cykly a √∫lohy

## Cykly (smyƒçky) a obr√°zky

Obr√°zky jsou v√Ωborn√Ω materi√°l pro procviƒçov√°n√≠ vno≈ôen√Ωch cykl≈Ø. Pro pr√°ci s obr√°zky
pou≈æijeme modul Python Imaging Library [PIL](https://pythonexamples.org/python-pillow/).

#### Import modulu Image:

```python
from PIL import Image   # modul pro pr√°ci s obr√°zky
```

#### Nov√Ω, pr√°zd√Ω obr√°zek:

```python
width  = 120
height = 80
size = (width, height)  # z√°vorky napov√≠daj√≠: dvojice (tuple), ale nejsou povinn√©

img = Image.new('RGB', size) # nov√Ω obr√°zek, RGB kan√°ly
```

#### Zobrazen√≠:

Na posledn√≠ ≈ô√°dce:

```python
img
```

Nebo kdekoli:

```python
display(img)
```

#### Pr√°ce s body (pixel = _picture element_) v obr√°zku:

ƒåten√≠:

```python
img.getpixel((10,10))  # ƒçern√° (0, 0, 0); z√°vorky nutn√©
```

Z√°pis:

```python
green = (0,255,0)
img.putpixel((10,10),green)
img
```

```python
img = Image.new('RGB', size)
print(img.getpixel((0,0)))
img.putpixel((10,10),(0,250,0))
print(img.getpixel((10,10)))
```

Zvƒõt≈°en√© obrazen√≠:

```python
img.resize((240, 160))
```

#### Animace

Ponƒõkud neobratn√°, ale p≈ôesto:

```python
from IPython.display import clear_output
from time import sleep

img = Image.new('RGB', (9,9))

for i in range(4):
  clear_output(wait=True)
  img.putpixel((4,4), (255,0,0) if i%2 else (0,255,0))
  display(img.resize((36,36)))
  sleep(1)
```

#### Naƒçten√≠ obr√°zku

Nahrajte obr√°zek [PythonLogo.png](.05/PythonLogo.png) do z√°lo≈æky Files nalevo v z√°pisn√≠ku. Pak lze obr√°zek naƒç√≠st a otev≈ô√≠t:

```python
img = Image.open('PythonLogo.png')
print(img)
print(img.height)
display(img)
```

A nap≈ô. takto lze obr√°zek otev≈ô√≠t p≈ô√≠mo z URL:

```python
import requests
url = 'https://excelatfinance.com/xlf/media/xlf-rgb-circles.png'
img = Image.open(requests.get(url, stream=True).raw)
img
```

### √ölohy:

- Vytvo≈ôte pr√°zdn√Ω obr√°zek a

  - vypl≈àte jej zvolenou barvou
  - namalujte do nƒõj pruhy: vodorovn√©, svisl√©, k≈ôi≈æuj√≠c√≠ se, apod.

- Naƒçtƒõte obr√°zek a aplikujte na nƒõj filtr, kter√Ω:
  - konvertuje barvy v obr√°zku na stupnici ≈°edi
  - konvertuje barvy v obr√°zku na ƒçernou a b√≠lou
  - rozlo≈æ√≠ obr√°zek na t≈ôi "kan√°ly" (slo≈æky): ƒçerven√Ω, zelen√Ω, modr√Ω

## Dal≈°√≠ √∫lohy procviƒçen√≠ cykl≈Ø, bez obr√°zk≈Ø

- Zjistƒõte kolik zadan√° vƒõta obsahuje p√≠smen a ƒç√≠slic.
- V zadan√© kolekci ƒç√≠sel najdƒõte minim√°ln√≠ a maxim√°ln√≠ prvek, bez pou≈æit√≠ funkc√≠ `min()`
  nebo `max()`.
- Vypi≈°te Fibonacciho posloupnost (jej√≠ ƒç√°st, samoz≈ôejmƒõ).
- Vypi≈°te Pascal≈Øv troj√∫heln√≠k (jeho ƒç√°st).
- Zjistƒõte GCD (nejvƒõt≈°√≠ spoleƒçn√Ω dƒõlitel) dvou cel√Ωch ƒç√≠sel, pomoc√≠ Euklidova algoritmu.

## Dal≈°√≠, slo≈æitƒõj≈°√≠ √∫lohy

- Myslete si ƒç√≠slo mezi 0 a 1023. V√°≈° program v√°m bude pokl√°dat ot√°zky, na kter√© odpov√≠te
  ano/ne. Program by mƒõl va≈°e ƒç√≠slo uh√°dnout co nejd≈ô√≠ve (co nejmen≈°√≠m poƒçtem ot√°zek).
- Napi≈°te program na urƒçen√≠ palindromu, kter√Ω nekop√≠ruje ≈æ√°dn√° data ze zadan√©ho ≈ôetƒõzce, a
  kter√Ω pracuje p≈ô√≠mo nad p≈Øvodn√≠mi daty (in-place/in situ algoritmus).

# üß© Mo≈æn√° ≈ôe≈°en√≠:

Typov√© anotace:

https://docs.python.org/3/library/typing.html

P≈ô√≠prava:

```python
# imports
from PIL import Image
from requests import get as getUrl

# building stones (useful functions)
def newImage(size: tuple[int,int]) -> Image.Image: # <- type anotations
  """ Create a new RGB image. """
  return Image.new('RGB', size)

# image from url
def getImage(url: str) -> Image.Image:
  """ Fetch an image from url. """
  return Image.open(getUrl(url, stream=True).raw)

# named colours
red     = (255,0,0)
green   = (0,255,0)
blue    = (0,0,255)
cyan    = (0,255,255)
magenta = (255,0,255)
yellow  = (255,255,0)
white   = (255,255,255)
black   = (0,0,0)
```

Vytvo≈ôte pr√°zdn√Ω obr√°zek a vypl≈àte jej zvolenou barvou:

```python
# brute force, to practice loops
def fill(img, color):
  for w in range(img.width):
    for h in range(img.height):
      pos = (w,h) # position
      img.putpixel(pos, color)

size = (120,48)
img = newImage(size)
display(img)

for color in (red, green, blue):
  fill(img, color)
  display(img)
```

Vytvo≈ôte pr√°zdn√Ω obr√°zek namalujte do nƒõj pruhy: vodorovn√©, svisl√© a k≈ôi≈æuj√≠c√≠ se:

```python
# switch red and blue colours
def redBlue(i: int):
  rb = (i//12)%2 # st≈ô√≠d√°n√≠ barev po dvan√°cti px
  return red if rb else blue

# switch red colour and nothing
def onlyRed(i: int):
  rb = (i//12)%2 # st≈ô√≠d√°n√≠ barvy/nebarvy po dvan√°cti px
  return red if rb else False

size = (120,60)
img = newImage(size)

# horizontal red/blue stripes
for x in range(img.width):
  for y in range(img.height):
    img.putpixel((x,y), redBlue(y))

display(img)
print()

# vertical red/blue stripes
for x in range(img.width):
  for y in range(img.height):
    img.putpixel((x,y), redBlue(x))

display(img)
print()

# crossed stripes
for x in range(img.width):
  for y in range(img.height):
    img.putpixel((x,y), redBlue(y))
    vertRed = onlyRed(x)
    if vertRed:
      img.putpixel((x,y), vertRed)

display(img)
```

Naƒçtƒõte obr√°zek a aplikujte na nƒõj filtr, kter√Ω konvertuje barvy v obr√°zku na stupnici ≈°edi, na ƒçernou a b√≠lou, na t≈ôi "kan√°ly" (slo≈æky) - ƒçerven√Ω, zelen√Ω a modr√Ω:

```python
imgUrl = 'https://i.imgflip.com/2/7nx4qw.jpg'

img = getImage(imgUrl)
display(img)
print(img)

# gray scale
img = getImage(imgUrl)
for x in range(img.width):
  for y in range(img.height):
    r,g,b = img.getpixel((x,y))
    gray = (r+g+b) // 3
    img.putpixel((x,y), (gray,gray,gray))

display(img)

# black and white
img = getImage(imgUrl)
bwThreshold = 128
for x in range(img.width):
  for y in range(img.height):
    r,g,b = img.getpixel((x,y))
    gray = (r+g+b) // 3
    bw = 0 if gray<bwThreshold else 255
    img.putpixel((x,y), (bw,bw,bw))

display(img)

# red channel
img = getImage(imgUrl)
for x in range(img.width):
  for y in range(img.height):
    r,g,b = img.getpixel((x,y))
    img.putpixel((x,y), (r,0,0))

display(img)

# green channel
# ...

# blue channel
# ...
```

Pro pokroƒçil√©:

```python
imgUrl = 'https://i.imgflip.com/2/7nx4qw.jpg'

def filter(img, func):
  """ Makes a copy of the image and applies a filter function."""
  img = img.copy()
  for x in range(img.width):
    for y in range(img.height):
      r,g,b = img.getpixel((x,y))
      r,g,b = func(r,g,b)
      img.putpixel((x,y), (r,g,b))

  return img

img = getImage(imgUrl)
display(img)

# gray scale
def grayFunc(r,g,b):
  gray = (r+g+b) // 3
  return (gray,gray,gray)

# subtractive colours
def cyanFunc(r,g,b):
  return (0,g,b)

def magentaFunc(r,g,b):
  return (r,0,b)

def yellowFunc(r,g,b):
  return (r,g,0)

# negatives
def bwNeg(r,g,b):
  gray = 255 - (r+g+b) // 3
  return (gray,gray,gray)

def clrNeg(r,g,b):
  return (255-r,255-g,255-b)

display(filter(img, grayFunc))
display(filter(img, cyanFunc))
display(filter(img, magentaFunc))
display(filter(img, yellowFunc))

display(filter(img, bwNeg))
display(filter(img, clrNeg))
```

≈†achovnice:

```python
# chessboard params
ROWS = 5
COLS = 7
SIZE = 12

# image params
width   = COLS * SIZE
height  = ROWS * SIZE
size = (width, height)
img = Image.new('RGB', size)

black = (0,0,0)
white = (255,255,255)

for i in range(width):
  for j in range(height):
    coe = (i//SIZE)%2                  # column - is even?
    roe = (j//SIZE)%2                  # row
    color = black if roe==coe else white
    img.putpixel((i,j),color)

for i in range(width):
  img.putpixel((i, 0), black)
  img.putpixel((i, height-1), black)

for j in range(height):
  img.putpixel((0, j), black)
  img.putpixel((width-1, j), black)

img
```
